{% extends 'base.html' %}
{% load blog_tags %}
{% block extra_head %}
<style>

/* Reuse general layout styles */
.hero{
  padding:80px 0;
  text-align:center;
  background:linear-gradient(180deg,rgba(108,124,255,.1),transparent);
  border-bottom:1px solid var(--border)
}

.main-area{padding:80px 0}

.layout-grid{
  display:grid;
  grid-template-columns:1fr;
  gap:40px
}

@media(min-width:992px){
  .layout-grid{grid-template-columns:2fr 1fr}
}

/* Single Post Card */
.single-post{
  background:var(--card);
  border:1px solid var(--border);
  border-radius:16px;
  padding:32px
}

.single-meta{
  display:flex;
  gap:20px;
  font-size:13px;
  color:var(--muted);
  margin-bottom:20px;
  flex-wrap:wrap
}

.single-title{
  font-size:32px;
  font-weight:800;
  line-height:1.3;
  margin-bottom:20px
}

.single-image{
  width:100%;
  height:320px;
  background:#1f243d;
  border-radius:14px;
  margin-bottom:30px;
  display:flex;
  align-items:center;
  justify-content:center;
  color:var(--muted)
}

.single-content{
  line-height:1.9;
  color:#ddd
}

.single-content p{margin-bottom:18px}

/* Tags */
.post-tags{
  margin-top:40px;
  display:flex;
  gap:10px;
  flex-wrap:wrap
}

.tag{
  padding:6px 14px;
  background:rgba(255,255,255,0.05);
  border-radius:20px;
  font-size:12px;
  color:var(--muted)
}

/* Author Box */
.author-box{
  margin-top:50px;
  padding:24px;
  background:rgba(255,255,255,0.03);
  border-radius:14px;
  border:1px solid var(--border);
  display:flex;
  gap:20px
}

.author-avatar{
  width:70px;
  height:70px;
  border-radius:50%;
  background:#2a2e45
}

.author-info h4{margin:0 0 8px}
.author-info p{font-size:13px;color:var(--muted)}

/* Sidebar Widgets (same style as blog) */
.widget{
  background:var(--card);
  padding:24px;
  border-radius:16px;
  border:1px solid var(--border);
  margin-bottom:30px
}

.widget-title{
  font-size:18px;
  font-weight:700;
  margin:0 0 20px;
  border-bottom:1px solid var(--border);
  padding-bottom:12px
}
.single-image {
  width: 100%;
  height: 320px; /* Your existing height */
  background: #1f243d;
  border-radius: 14px;
  margin-bottom: 30px;
  overflow: hidden; /* Ensures image doesn't bleed past rounded corners */
  display: flex;
  align-items: center;
  justify-content: center;
}

.single-image img {
  width: 100%;
  height: 100%;
  object-fit: cover; /* This makes the image fill the area without stretching */
  display: block;
}
</style>
{% endblock %}


{% block content %}

<!-- Banner -->
<section class="hero">
  <div class="container">
    {% for category in post.category.all %}
    <span class="badge">{{category.name}} {% if not forloop.last %}, {% endif %}</span>
    {% empty %}
    <span class="badge">No Category</span>
    {% endfor %}
    <h1>{{post.title}}</h1>
  </div>
</section>


<!-- Main Content -->
<section class="main-area">
  <div class="container layout-grid">

    <!-- Left: Single Post -->
    <article class="single-post">

      <div class="single-meta">
        <span>By {{post.author}}</span>
        <span>{{post.created_date|date:"Y/m/d"}}</span>
        <span>{{post.counted_views}} Views</span>
        <span>8 Comments</span>
      </div>

      <h2 class="single-title">
       {{post.title}}
      </h2>

      <div class="single-image">
            {% if post.img %}
              <img src="{{post.img.url}}" alt="{{ post.title }}">
            {% else %}
            <div style="background: #1f243d; height: 240px; border-radius: 12px; margin-bottom: 20px; display: flex; align-items: center; justify-content: center; color: var(--muted);">
              no image
            </div>
            {% endif %}
      </div>

      <div class="single-content">
        <p>
          {{post.content}}
        </p>
      </div>

      <!-- Tags -->
        {% for tag in post.tag.all %}
      <div class="post-tags">
        <span class="tag">{{tag.name}}</span>
      </div>
      {% empty %}
           <div class="post-tags">
        <span class="tag">No tags</span>

      </div>
       {% endfor %}
      <!-- Author Box -->
      <div class="author-box">
        <div class="author-avatar"></div>
        <div class="author-info">
          <h4>{{post.author}}</h4>
          {% comment %} <p>
            Short bio of the author. A few lines about experience or interests.
          </p> {% endcomment %}
        </div>
      </div>

    </article>


    <!-- Right: Sidebar -->
    <aside class="sidebar-widgets">

      <div class="widget">
        <h3 class="widget-title">Search</h3>
        <input type="text" placeholder="Search..." style="width:100%;padding:10px;border-radius:8px;border:1px solid var(--border);background:#1f243d;color:white">
      </div>

      <div class="widget">
        <h3 class="widget-title">Latest Posts</h3>
        {% show_latest_posts 3 %}
      </div>

      <div class="widget">
          <h3 class="widget-title">Categories</h3>
        {% for category in categories %}
        <a href="{% url 'posts:cat' category_slug=category.slug %}">{{category.name}}</a> <br>
        {% endfor %}
      </div>

    </aside>

  </div>
</section>

{% endblock %}
