{% extends 'base.html' %}
{% load blog_tags %}
{% block extra_head %}
<style>
.hero{padding:80px 0;text-align:center;background:linear-gradient(180deg,rgba(108,124,255,.1),transparent);border-bottom:1px solid var(--border)}
.top-cats{padding:60px 0}
.cat-grid{display:grid;grid-template-columns:repeat(auto-fit,minmax(300px,1fr));gap:24px}
.cat-card{position:relative;height:200px;border-radius:16px;overflow:hidden;border:1px solid var(--border);background:var(--card);transition:transform .3s}
.cat-card:hover{transform:translateY(-5px)}
.cat-overlay{position:absolute;inset:0;display:flex;flex-direction:column;justify-content:center;align-items:center}
.cat-title{font-size:20px;font-weight:700;text-transform:uppercase;letter-spacing:1px;margin-bottom:8px}
.cat-line{width:40px;height:3px;background:var(--accent)}
.main-area{padding-bottom:80px}
.layout-grid{display:grid;grid-template-columns:1fr;gap:40px}
@media(min-width:992px){.layout-grid{grid-template-columns:2fr 1fr}}
.post-item{display:grid;grid-template-columns:1fr;gap:20px;margin-bottom:40px;padding:24px;background:var(--card);border-radius:16px;border:1px solid var(--border)}
@media(min-width:768px){.post-item{grid-template-columns:120px 1fr}}
.post-meta-side{display:flex;flex-direction:column;gap:12px;font-size:13px;color:var(--muted);text-align:right;border-right:1px solid var(--border);padding-right:20px}
.post-content img{width:100%;height:240px;object-fit:cover;border-radius:12px;margin-bottom:20px}
.post-title{font-size:24px;font-weight:700;margin:0 0 12px;line-height:1.3}
.post-excerpt{color:var(--muted);margin-bottom:20px}
.widget{background:var(--card);padding:24px;border-radius:16px;border:1px solid var(--border);margin-bottom:30px}
.widget-title{font-size:18px;font-weight:700;margin:0 0 20px;border-bottom:1px solid var(--border);padding-bottom:12px}
.search-form{display:flex;gap:10px}
.search-input{width:100%;padding:10px;background:rgba(0,0,0,0.2);border:1px solid var(--border);color:white;border-radius:6px}
.mini-post{display:flex;gap:16px;margin-bottom:20px;align-items:center}
.mini-thumb{width:60px;height:60px;border-radius:8px;background:#2a2e45}
.cat-list li{padding:10px 0;border-bottom:1px solid var(--border);display:flex;justify-content:space-between;color:var(--muted)}
.cat-list li:last-child{border-bottom:none}
.tag-cloud{display:flex;flex-wrap:wrap;gap:8px}
.tag{padding:6px 12px;background:rgba(255,255,255,0.05);border-radius:20px;font-size:12px;color:var(--muted)}
.tag:hover{background:var(--accent);color:#fff}

/* Pagination */
.pagination{display:flex;justify-content:center;align-items:center;gap:8px;margin-top:60px}
.page-link{display:inline-flex;align-items:center;justify-content:center;width:40px;height:40px;border-radius:8px;background:var(--card);border:1px solid var(--border);color:var(--muted);font-weight:600;transition:.2s}
.page-link:hover{border-color:var(--accent);color:var(--accent);transform:translateY(-2px)}
.page-link.active{background:var(--gradient);color:white;border:none}
.page-btn{width:auto;padding:0 20px}
</style>
{% endblock %}
{% block content %}

  

  <!-- Banner -->
  <section class="hero">
    <div class="container">
      <span class="badge">Travel & Lifestyle</span>
      <h1>Explore the Unseen World</h1>
      <p>Discover stories, thinking, and expertise from writers on any topic.</p>
    </div>
  </section>

  <!-- Top Categories -->
  <section class="top-cats">
    <div class="container">
      <div class="cat-grid">
        <div class="cat-card">
          <div class="cat-overlay">
            <div class="cat-title">Technology</div>
            <div class="cat-line"></div>
          </div>
        </div>
        <div class="cat-card">
          <div class="cat-overlay">
            <div class="cat-title">Lifestyle</div>
            <div class="cat-line"></div>
          </div>
        </div>
        <div class="cat-card">
          <div class="cat-overlay">
            <div class="cat-title">Design</div>
            <div class="cat-line"></div>
          </div>
        </div>
      </div>
    </div>
  </section>

  <!-- Main Content -->
  <section class="main-area">
    <div class="container layout-grid">
      
      <!-- Left: Posts -->
      <div class="posts-list">
        
        <!-- Post 1 -->
        {% for post in posts %}
        <article class="post-item">
          <div class="post-meta-side">
            <div>{{post.author}} <span>üë§</span></div>
            <div>{{post.created_date|date:"Y/m/d"}}<span>üìÖ</span></div>
            <div>{{post.counted_views}} Views <span>üëÅÔ∏è</span></div>
            <div>06 Comments <span>üí¨</span></div>
          </div>
          <div class="post-content">
            <!-- Placeholder for post image -->
             {% if post.img %}
            <div style="background: #1f243d; height: 240px; border-radius: 12px; margin-bottom: 20px; display: flex; align-items: center; justify-content: center; color: var(--muted);">
              <img src="{{post.img.url}}" alt="{{ post.title }}">
            </div>
              {% else %}
            <div style="background: #1f243d; height: 240px; border-radius: 12px; margin-bottom: 20px; display: flex; align-items: center; justify-content: center; color: var(--muted);">
              no image
            </div>
            {% endif %}
            <!-- POST SECTION -->
            <h2 class="post-title"><a href="{% url 'posts:single' pid=post.id %}">{{post.title}}</a></h2>
            <p class="post-excerpt">
              {{ post.content|truncatewords:30 }}
            </p>
            <a href="{% url 'posts:single' pid=post.id %}" class="btn">View More</a>
          </div>
        </article>
        {% endfor %}

        <!-- Pagination -->
        <div class="pagination">
          {% if posts.has_previous %}
          <a href="?page={{posts.previous_page_number}}" class="page-link page-btn">Previous</a>
          {% endif %}
          
          {% for i in posts.paginator.page_range %}
             {% if posts.number == i %}
                 <span class="page-link active">{{ i }}</span>
             {% else %}
                 <a href="?page={{ i }}" class="page-link">{{ i }}</a>
             {% endif %}
           {% endfor %}
          
          {% if posts.has_next %}
          <a href="?page={{posts.next_page_number}}" class="page-link page-btn">Next</a>
          {% endif %}
        </div>

      </div>

      <!-- Right: Sidebar -->
      <aside class="sidebar-widgets">
        {% include 'posts/partials/sidebar/search.html' %}
        {% show_latest_posts 3 %}
        {% include 'posts/partials/sidebar/recent_comments.html' %}
        {% include 'posts/partials/sidebar/categories.html' %}
        {% include 'posts/partials/sidebar/tag_cloud.html' %}
      </aside>
    </div>
  </section>

{% endblock %}
